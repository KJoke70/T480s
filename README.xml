<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<article lang="en">
<articleinfo>
    <title>Thinkpad T480s</title>
    <author>
        <firstname>Martin</firstname>
        <surname>Lautenbacher</surname>
    </author>
    <authorinitials>ML</authorinitials>
</articleinfo>
<section id="_dualboot_with_arch_windows_10_and_disk_encryption">
<title>Dualboot with Arch, Windows 10 and disk encryption</title>
<simpara>See <ulink url="dualboot.asciidoc">here</ulink>.</simpara>
</section>
<section id="_nvidia_optimus_amp_linux">
<title>Nvidia Optimus &amp; Linux</title>
<itemizedlist>
<listitem>
<simpara>
<ulink url="https://www.youtube.com/watch?v=5nGbWE-pvIE">https://www.youtube.com/watch?v=5nGbWE-pvIE</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/PRIME">https://wiki.archlinux.org/index.php/PRIME</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/NVIDIA_Optimus">https://wiki.archlinux.org/index.php/NVIDIA_Optimus</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="http://lenovolinux.blogspot.com/2018/02/bumblebee-on-lenovo-t440p-nvidia-gt.html?m=1">http://lenovolinux.blogspot.com/2018/02/bumblebee-on-lenovo-t440p-nvidia-gt.html?m=1</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_hidpi_amp_linux">
<title>HiDPI &amp; Linux</title>
<itemizedlist>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/HiDPI">https://wiki.archlinux.org/index.php/HiDPI</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Xorg#Display_size_and_DPI&lt;Paste&gt">https://wiki.archlinux.org/index.php/Xorg#Display_size_and_DPI&lt;Paste&gt</ulink>;
</simpara>
</listitem>
</itemizedlist>
<simpara>Adding this to my <literal>~/.Xresources</literal> has solved 90% of scaling for me
(120 for 125% scaling):</simpara>
<formalpara><title><literal>~/.Xresources</literal></title><para>
<screen>Xft.dpi: 120
Xft.autohint: 0
Xft.lcdfilter:  lcddefault
Xft.hintstyle:  hintfull
Xft.hinting: 1
Xft.antialias: 1
Xft.rgba: rgb

...</screen>
</para></formalpara>
</section>
<section id="_cpu_throttling_fix">
<title>CPU throttling fix</title>
<itemizedlist>
<listitem>
<simpara>
<ulink url="https://www.reddit.com/r/thinkpad/comments/870u0a/t480s_linux_throttling_bug/">https://www.reddit.com/r/thinkpad/comments/870u0a/t480s_linux_throttling_bug/</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_X1_Carbon_(Gen_6)#Power_management.2FThrottling_issues">https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_X1_Carbon_(Gen_6)#Power_management.2FThrottling_issues</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://github.com/erpalma/lenovo-throttling-fix">https://github.com/erpalma/lenovo-throttling-fix</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_power_management">
<title>Power Management</title>
<itemizedlist>
<listitem>
<simpara>
Packages:
</simpara>
<itemizedlist>
<listitem>
<simpara>
<literal>tlp</literal>
</simpara>
</listitem>
<listitem>
<simpara>
<literal>tlp-rdw</literal>
</simpara>
</listitem>
<listitem>
<simpara>
<literal>acpi_call</literal>
</simpara>
</listitem>
<listitem>
<simpara>
<literal>tp_smapi</literal> (doesn&#8217;t work?)
</simpara>
</listitem>
</itemizedlist>
</listitem>
<listitem>
<simpara>
<ulink url="http://thinkwiki.de/TLP_-_Linux_Stromsparen">http://thinkwiki.de/TLP_-_Linux_Stromsparen</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/TLP">https://wiki.archlinux.org/index.php/TLP</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Fan_speed_control">https://wiki.archlinux.org/index.php/Fan_speed_control</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Undervolting_CPU">https://wiki.archlinux.org/index.php/Undervolting_CPU</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/PHC">https://wiki.archlinux.org/index.php/PHC</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/CPU_frequency_scaling">https://wiki.archlinux.org/index.php/CPU_frequency_scaling</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Laptop">https://wiki.archlinux.org/index.php/Laptop</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T480s">https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T480s</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T480">https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T480</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_other">
<title>Other</title>
<section id="_special_buttons">
<title>Special Buttons</title>
<simpara>Some buttons (<literal>Fn+F11</literal>, <literal>Fn+F12</literal>) have a keycode above 255 and are
thus not supported by X. They can be remapped using:</simpara>
<section id="_acpi_events">
<title>ACPI Events</title>
<itemizedlist>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/acpid">https://wiki.archlinux.org/index.php/acpid</ulink>
</simpara>
</listitem>
</itemizedlist>
<formalpara><title><literal>/etc/acpi/handler.sh</literal></title><para>
<programlisting language="Bash" linenumbering="unnumbered"># ...
    ibm/hotkey)
      case "$4" in
          00001311)
              logger 'Favorites'
              /etc/acpi/actions/favorites-key.sh
              ;;
          00001315)
              logger 'Keyboard'
              /etc/acpi/actions/keyboard-key.sh
              ;;
          *)
              logger "ACPI action undefined: $1 : $2 : $3 : $4"
              ;;
  esac
  ;;
# ...</programlisting>
</para></formalpara>
</section>
<section id="_udev_hwdb">
<title>udev hwdb</title>
<itemizedlist>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T480#Special_buttons">https://wiki.archlinux.org/index.php/Lenovo_ThinkPad_T480#Special_buttons</ulink>
</simpara>
</listitem>
<listitem>
<simpara>
<ulink url="https://wiki.archlinux.org/index.php/Map_scancodes_to_keycodes">https://wiki.archlinux.org/index.php/Map_scancodes_to_keycodes</ulink>
</simpara>
</listitem>
</itemizedlist>
</section>
</section>
</section>
</article>
